/**
 ******************************************************************************
 * @file    constants.h
 * @brief   Project specific constants.
 ******************************************************************************
 */

#pragma once

#include <math.h>

#include <limits>
#include <vector>

// Project specific constants.
constexpr inline int SAMPLE_FREQUENCY = 16000;
constexpr inline int WAVEFORM_SAMPLES = 4096;  // Must be power of 2.

// Math constants.
constexpr inline float FLOAT_EPS = std::numeric_limits<float>::epsilon();
constexpr inline float FLOAT_MAX = std::numeric_limits<float>::max();
constexpr inline float PI_32 = 3.14159265358979f;
constexpr inline float TWO_PI_32 = 2.0 * PI_32;

// Hardware constants.
#ifndef BUILD_TEST
constexpr inline float MIC1_2_DISTANCE_m = 0.15f;
constexpr inline float MIC2_3_DISTANCE_m = 0.13f;
constexpr inline float MIC3_4_DISTANCE_m = 0.15f;
constexpr inline float MIC4_1_DISTANCE_m = 0.13f;
#else
constexpr inline float MIC1_2_DISTANCE_m = 0.10f;
constexpr inline float MIC2_3_DISTANCE_m = 0.10f;
constexpr inline float MIC3_4_DISTANCE_m = 0.10f;
constexpr inline float MIC4_1_DISTANCE_m = 0.10f;
#endif

// Physics constants.
constexpr inline float SOUND_AIR_mps = 343.0f;

inline std::vector<float> PCA_MEAN_VECTOR = {
    -1.0040586e-08, 1.5060881e-08,  -1.5060881e-08, 0.0000000e+00,
    -5.0202931e-09, -1.2550733e-08, -1.2550733e-08, 0.0000000e+00,
    1.2550733e-08,  1.2550733e-09,  -2.5101465e-09, -2.0081172e-08,
    1.0040586e-08};

inline std::vector<std::vector<float>> PCA_PROJECTION_MATRIX = {
    {0.34319228f, -0.38742244f, 0.48103696f, 0.21259171f, 0.20911169f,
     -0.41806036f, -0.3320004f, -0.02460347f, -0.04781684f, -0.27246088f,
     -0.0267434f, 0.14978828f, 0.16286871f},
    {-0.28394753f, 0.28831702f, 0.20842852f, 0.27484107f, 0.17964566f,
     0.108248f, 0.3558f, 0.36585143f, -0.17749022f, -0.29338044f, 0.04349486f,
     0.52927965f, 0.11503173f},
    {-0.2627678f, 0.17900096f, 0.21970206f, 0.3692363f, 0.4281452f, 0.11649151f,
     -0.21256758f, -0.03281652f, 0.44021717f, 0.46073133f, -0.04103861f,
     -0.15675128f, 0.19709691f},
    {0.06190348f, -0.11045568f, 0.18023877f, -0.03514713f, 0.3195832f,
     0.2425994f, 0.00820939f, -0.2655008f, -0.34168264f, 0.23711555f,
     0.61154854f, 0.11377044f, -0.3984897f},
    {0.17009577f, -0.37396178f, -0.03046257f, -0.41015324f, 0.15647872f,
     0.02499005f, 0.25776207f, 0.5003866f, 0.3688345f, 0.19643095f, 0.28515977f,
     0.1012187f, 0.23225613f},
    {0.12710957f, -0.26316157f, -0.03965033f, -0.03784309f, 0.2734423f,
     0.5129159f, 0.23256515f, -0.300411f, -0.2688779f, -0.09708367f,
     -0.29921407f, -0.12595767f, 0.4922227f},
    {0.20751879f, 0.03739147f, -0.28964165f, 0.29099518f, -0.40114316f,
     0.10760378f, -0.21235348f, -0.184895f, 0.04574223f, 0.18833275f,
     0.33692554f, 0.43463945f, 0.44181553f},
    {0.61601394f, 0.08485138f, 0.07921097f, 0.4850969f, -0.14300586f,
     0.24906234f, 0.24224909f, 0.3031964f, 0.04069053f, 0.06474832f,
     -0.04898597f, -0.26734388f, -0.24272998f},
    {-0.03690616f, -0.20125486f, 0.06380583f, 0.14565724f, -0.07813179f,
     -0.11430744f, 0.5331394f, -0.52353895f, 0.51344603f, -0.12209769f,
     -0.02226948f, 0.19196218f, -0.1986598f},
    {0.40768343f, 0.306623f, -0.15687664f, -0.2810811f, 0.32667118f,
     0.16862679f, -0.23748232f, -0.07756692f, 0.2155337f, -0.02180883f,
     -0.3389741f, 0.4677081f, -0.24085565f},
    {-0.04722392f, -0.2532172f, 0.02477758f, 0.06827121f, -0.09525935f,
     -0.22529449f, 0.17182763f, 0.06265314f, -0.3240698f, 0.6548486f,
     -0.44435525f, 0.30212495f, -0.11187057f},
    {-0.22147326f, -0.2927322f, 0.41509104f, -0.08830304f, -0.41744426f,
     0.55217284f, -0.2941597f, 0.1032071f, 0.1640266f, -0.05828366f,
     -0.14469817f, 0.15297177f, -0.18488818f},
    {0.2055211f, 0.46957827f, 0.591729f, -0.3733101f, -0.24856092f,
     -0.08131216f, 0.19217992f, -0.1804031f, -0.03978366f, 0.18951733f,
     0.03413376f, -0.05600797f, 0.26092052f}};

inline std::vector<std::vector<float>> LDA_PROJECTION_MATRIX = {
    {-0.7260849f, -0.04881961f, -0.14597033f},
    {0.11253582f, 0.00500079f, 0.25506118f},
    {0.01918623f, 0.00371885f, 0.32392657f},
    {-0.05910615f, 0.3453342f, 0.15788497f},
    {0.23876604f, 0.12188181f, 0.19686802f},
    {-0.18093571f, -0.1139619f, 0.26754937f},
    {-0.05977106f, -0.55214286f, -0.02846351f},
    {-0.6849867f, 0.22264698f, 0.44775397f},
    {-0.00209939f, -0.9196134f, 0.5133107f},
    {0.04353651f, 0.48969373f, -0.20516308f},
    {-0.26176748f, 0.01140828f, -0.06229502f},
    {-0.4138518f, 0.33415967f, 0.5736435f},
    {-0.10649799f, 0.2934166f, 0.94721264f}};

inline std::vector<std::vector<float>> LDA_CLASS_WEIGHTS = {
    {3.9274389e-01, -5.8903709e-02, -1.2942868e-02, -2.7727470e-01,
     -2.2296713e-01, 1.8753092e-01, 5.1726437e-01, 1.3203688e-01, 8.1390303e-01,
     -4.5390186e-01, 1.1594095e-01, -9.7239308e-02, -2.0956762e-01},
    {1.1580147e-01, -6.7619383e-01, -9.0842974e-01, -4.0984175e-01,
     -4.4084018e-01, -8.4907454e-01, -3.9912298e-02,
     -1.5005513e+00 - 1.6145502e+00, 6.8368208e-01, 7.4194670e-02,
     -1.7294664e+00, -2.6715744e+00},
    {5.9640479e-01, -8.3747081e-02, -1.8061161e-03, 1.7197914e-01,
     -1.5472615e-01, 1.2716243e-01, -1.3432188e-01, 6.7627341e-01,
     -2.8372738e-01, 1.1774066e-01, 2.2428961e-01, 4.8759493e-01,
     2.2746494e-01},
    {-8.1035465e-01, 1.4284898e-01, 4.5627978e-02, -2.6360821e-02,
     2.8579083e-01, -1.8694678e-01, -1.1009146e-01, -6.9987267e-01,
     -3.4480013e-02, 6.9960795e-02, -2.9064363e-01, -3.8473788e-01,
     -2.3028644e-02}};

inline std::vector<float> LDA_CLASS_BIASES = {-2.1717598f, -8.225346f,
                                              -1.3269371f, -1.5450068f};